# Title     : CARNIVAL example to test dt function
# Objective : Runs CARNIVAL-dt toy model
# Created by: Nicolas Peschke
# Created on: 16.01.2020

# Script to try CARNIVAL
library(CARNIVAL)
library(dplyr) # load dplyr library
library(readr) # load readr library
library(igraph) # load igraph library
library(readxl) # load readxl library

base_directory <- "D:/MoBi_Studium/Master/internships/saez/gitRepos/CARNIVAL_dt/"
data_directory <- "D:/MoBi_Studium/Master/internships/saez/gitRepos/CARNIVAL_dt/data/test_data/"
solver_path <- "C:/Program Files/IBM/ILOG/CPLEX_Studio1210/cplex/bin/x64_win64/cplex.exe"

test_network <- readr::read_tsv(paste0(data_directory, "test_network.tsv"))
test_measurements <- readr::read_tsv(paste0(data_directory, "test_measurements.tsv"))
test_input <- readr::read_tsv(paste0(data_directory, "test_input.tsv"))

# cplex solver
toy_result <- runCARNIVAL(solverPath = solver_path,
                          netObj = test_network,
                          measObj = test_measurements,
                          inputObj = test_input,
                          mipGAP = 0,
                          poolrelGAP = 0,
                          DOTfig = TRUE,
                          # experimental_conditions = c(1, 2),
                          dt = TRUE,
                          solver = "cplex")

